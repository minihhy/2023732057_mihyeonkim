작성자: 20040903 Miheon Kim

# 예제 3 — Two-Mass Spring-Damper System

## 1. 문제 개요
- 두 질량 \(M_1, M_2\) 이 스프링/댐퍼로 연결된 시스템.
- 입력 \(u(t)\): \(M_1\)에 가해지는 외력.
- 목표: 상태변수 정의 후 **상태방정식**과 행렬 \(A, B\)를 유도.

---

## 2. 시스템 구성
| 요소 | 기호 | 의미 |
|---|---|---|
| 질량 | \(M_1, M_2\) | 카트 1, 2 |
| 스프링 | \(k_1, k_2\) | \(k_1\): \(M_1\)–고정벽, \(k_2\): \(M_1\)–\(M_2\) |
| 감쇠기 | \(b_1, b_2\) | \(b_1\): \(M_1\)–고정벽, \(b_2\): \(M_1\)–\(M_2\) |
| 입력 | \(u(t)\) | \(M_1\)에 작용하는 힘 |
| 출력 | \(y(t)\) | 필요에 따라 \(p(t)\) 또는 \(q(t)\) 등 선택 |

---

## 3. 상태변수 정의
- 변위 \(p(t)\) = \(M_1\) 위치, \(q(t)\) = \(M_2\) 위치
- **상태벡터(정의)**  
  ![xvec](https://latex.codecogs.com/svg.image?x(t)%3D%5Cbegin%7Bbmatrix%7Dp(t)%5C%5Cq(t)%5C%5C%5Cdot%7Bp%7D(t)%5C%5C%5Cdot%7Bq%7D(t)%5Cend%7Bbmatrix%7D)

---

## 4. 상태방정식 유도 개요
- 1행: \( \dot{p}= \dot{x}_1 = x_3 \)
- 2행: \( \dot{q}= \dot{x}_2 = x_4 \)
- 3행: \(M_1 \dot{x}_3 = -k_1 p - b_1 x_3 - k_2(p-q) - b_2(x_3-x_4) + u \)
- 4행: \(M_2 \dot{x}_4 = \phantom{-}k_2(p-q) + b_2(x_3-x_4)\)

이를 행렬형으로 쓰면:

![ss](https://latex.codecogs.com/svg.image?%5Cdot%7Bx%7D(t)%3DAx(t)%2BBu(t))

---

## 5. 상태공간 행렬
- **행렬 \(A, B\) (입력 \(u\)가 \(M_1\)에 작용):**  
  ![AB](https://latex.codecogs.com/svg.image?A%3D%5Cbegin%7Bbmatrix%7D0%260%261%260%5C%5C0%260%260%261%5C%5C-%5Cfrac%7Bk_1%2Bk_2%7D%7BM_1%7D%26%5Cfrac%7Bk_2%7D%7BM_1%7D%26-%5Cfrac%7Bb_1%2Bb_2%7D%7BM_1%7D%26%5Cfrac%7Bb_2%7D%7BM_1%7D%5C%5C%5Cfrac%7Bk_2%7D%7BM_2%7D%26-%5Cfrac%7Bk_2%7D%7BM_2%7D%26%5Cfrac%7Bb_2%7D%7BM_2%7D%26-%5Cfrac%7Bb_2%7D%7BM_2%7D%5Cend%7Bbmatrix%7D%2C%5Cquad%20B%3D%5Cbegin%7Bbmatrix%7D0%5C%5C0%5C%5C%5Cfrac%7B1%7D%7BM_1%7D%5C%5C0%5Cend%7Bbmatrix%7D)

- **출력 선택 예시**
  - \(y(t)=p(t)\):  
    ![Cp](https://latex.codecogs.com/svg.image?C%3D%5Cbegin%7Bbmatrix%7D1%260%260%260%5Cend%7Bbmatrix%7D%2C%20D%3D%5Cbegin%7Bbmatrix%7D0%5Cend%7Bbmatrix%7D)
  - \(y(t)=q(t)\):  
    ![Cq](https://latex.codecogs.com/svg.image?C%3D%5Cbegin%7Bbmatrix%7D0%261%260%260%5Cend%7Bbmatrix%7D%2C%20D%3D%5Cbegin%7Bbmatrix%7D0%5Cend%7Bbmatrix%7D)

---

## 6. 물리적 해석(요약)
| 항목 | 의미 |
|---|---|
| \(A\) | 스프링/댐퍼/질량의 결합으로 정해지는 **자연 동특성** |
| \(B\) | 외력이 \(M_1\)에 가해질 때 상태 변화에 미치는 **입력 경로** |
| 결합항 | \(k_2, b_2\)는 두 질량의 상호작용(상대변위/상대속도)에 의한 결합 |

---

## 7. MATLAB 예시 코드
```matlab
% Two-Mass Spring-Damper: State-Space
k1 = 150;   k2 = 700;     % N/m
b1 = 15;    b2 = 35;      % N·s/m
M1 = 5;     M2 = 20;      % kg

A = [ 0   0   1   0;
      0   0   0   1;
     -(k1+k2)/M1   k2/M1   -(b1+b2)/M1   b2/M1;
       k2/M2      -k2/M2     b2/M2      -b2/M2 ];
B = [0; 0; 1/M1; 0];
C = [1 0 0 0];   % y = p(t), 필요시 [0 1 0 0]으로 변경
D = 0;

sys = ss(A,B,C,D);
x0  = [0.0; 0.0; 0.0; 0.0];  % 초기상태
t   = 0:0.01:5;
u   = zeros(size(t));        % 자유응답: u=0
initial(sys, x0, t);         % 또는 lsim(sys,u,t,x0)
